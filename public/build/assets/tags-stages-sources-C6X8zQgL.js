import{a as y}from"./axios-DsPaXkF5.js";import{S as V}from"./sweetalert2.all-B9kxGEux.js";import{r as u,Q as b,_ as A,l as v,j as o,F as w,Z as T,k as _,L as B,bn as N,Y as x,o as m,O as S}from"./main-CK36iqPX.js";import"./_commonjsHelpers-Cpj98o6Y.js";function F(){const d=u([]),t=u([]),r=u([]),e=u(!1),n=u(""),f=u(!1),s=u(""),i=u(null),c=u(!1),h=u(""),k=async()=>{try{const a=(await y.get("/items")).data;d.value=a.tags||[],t.value=a.stages||[],r.value=a.sources||[]}catch(l){console.error("Error fetching items:",l)}},M=(l,a=null)=>{n.value=l,a?(f.value=!0,s.value=a.name,i.value=a):(f.value=!1,s.value="",i.value=null),e.value=!0},p=()=>{e.value=!1},E=async()=>{if(s.value.trim()===""){alert(`Please enter a valid ${n.value}.`);return}try{if(f.value&&i.value){const a=(await y.put(`/api/items/${i.value.id}`,{name:s.value})).data.item;n.value==="tag"?d.value=d.value.map(g=>g.id===a.id?a:g):n.value==="stage"?t.value=t.value.map(g=>g.id===a.id?a:g):n.value==="source"&&(r.value=r.value.map(g=>g.id===a.id?a:g)),C(`${n.value} updated successfully!`)}else{const a=(await y.post("/api/items",{name:s.value,type:n.value})).data.item;n.value==="tag"?d.value.push(a):n.value==="stage"?t.value.push(a):n.value==="source"&&r.value.push(a),C(`${n.value} added successfully!`)}p()}catch(l){console.error("Error saving item:",l),alert("There was an error saving your data.")}},I=l=>{V.fire({title:`Are you sure you want to delete this ${l.type}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"No, Cancel"}).then(async a=>{a.isConfirmed&&await D(l)})},D=async l=>{try{await y.delete(`/items/${l.id}`),l.type==="tag"?d.value=d.value.filter(a=>a.id!==l.id):l.type==="stage"?t.value=t.value.filter(a=>a.id!==l.id):l.type==="source"&&(r.value=r.value.filter(a=>a.id!==l.id)),C("Item deleted successfully!")}catch(a){console.error("Error deleting item:",a),alert("There was an error deleting your data.")}},C=l=>{h.value=l,c.value=!0,setTimeout(()=>c.value=!1,3e3)};return b(()=>{k()}),{tags:d,stages:t,sources:r,showModal:e,modalType:n,modalEditMode:f,inputValue:s,openModal:M,closeModal:p,saveItem:E,showToast:c,toastMessage:h,confirmDelete:I}}const L={setup(){const{tags:d,stages:t,sources:r,showModal:e,modalType:n,modalEditMode:f,inputValue:s,openModal:i,closeModal:c,saveItem:h,showToast:k,toastMessage:M,confirmDelete:p}=F();return{tags:d,stages:t,sources:r,showModal:e,modalType:n,modalEditMode:f,inputValue:s,openModal:i,closeModal:c,saveItem:h,showToast:k,toastMessage:M,confirmDelete:p}}},U=o("h1",{class:"tss-class"},"Tags | Stage | Source",-1),Y={class:"cards-container"},j={class:"card"},O=o("h3",null,"Tags",-1),P={class:"tags"},Q={class:"tag-icons"},Z=["onClick"],q=["onClick"],z={class:"card"},G=o("h3",null,"Stage",-1),H={class:"stages"},J={class:"tag-icons"},K=["onClick"],R=["onClick"],W={class:"card"},X=o("h3",null,"Source",-1),$={class:"sources"},ee={class:"tag-icons"},se=["onClick"],oe=["onClick"],ae={key:0,class:"modal"},te={class:"modal-content"},le=["placeholder"],ne={class:"modal-actions"},ie={key:1,class:"toast"};function ce(d,t,r,e,n,f){return m(),v("div",null,[U,o("div",Y,[o("div",j,[O,o("div",P,[(m(!0),v(w,null,T(e.tags,(s,i)=>(m(),v("span",{key:s.id,class:"tag"},[o("div",Q,[o("span",{class:"tag-icon",onClick:c=>e.openModal("tag",s)},"✏️",8,Z),o("span",{class:"delete-icon",onClick:c=>e.confirmDelete(s)},"🗑️",8,q)]),S(" "+_(s.name),1)]))),128)),o("button",{onClick:t[0]||(t[0]=s=>e.openModal("tag"))},"➕ Add Tag")])]),o("div",z,[G,o("div",H,[(m(!0),v(w,null,T(e.stages,(s,i)=>(m(),v("span",{key:i,class:"stage"},[o("div",J,[o("span",{class:"tag-icon",onClick:c=>e.openModal("stage",s)},"✏️",8,K),o("span",{class:"delete-icon",onClick:c=>e.confirmDelete(s)},"🗑️",8,R)]),S(" "+_(s.name),1)]))),128)),o("button",{onClick:t[1]||(t[1]=s=>e.openModal("stage"))},"➕ Add Stage")])]),o("div",W,[X,o("div",$,[(m(!0),v(w,null,T(e.sources,(s,i)=>(m(),v("span",{key:i,class:"source"},[o("div",ee,[o("span",{class:"tag-icon",onClick:c=>e.openModal("source",s)},"✏️",8,se),o("span",{class:"delete-icon",onClick:c=>e.confirmDelete(s)},"🗑️",8,oe)]),S(" "+_(s.name),1)]))),128)),o("button",{onClick:t[2]||(t[2]=s=>e.openModal("source"))},"➕ Add Source")])])]),e.showModal?(m(),v("div",ae,[o("div",te,[o("h3",null,_(e.modalEditMode?"Edit":"Add")+" "+_(e.modalType),1),B(o("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>e.inputValue=s),placeholder:"Enter "+e.modalType},null,8,le),[[N,e.inputValue]]),o("div",ne,[o("button",{onClick:t[4]||(t[4]=(...s)=>e.saveItem&&e.saveItem(...s))},_(e.modalEditMode?"Update":"Add")+" "+_(e.modalType),1),o("button",{onClick:t[5]||(t[5]=(...s)=>e.closeModal&&e.closeModal(...s))},"Close")])])])):x("",!0),e.showToast?(m(),v("div",ie,_(e.toastMessage),1)):x("",!0)])}const me=A(L,[["render",ce]]);export{me as default};
