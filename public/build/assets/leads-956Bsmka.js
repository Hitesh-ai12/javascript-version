import{a as _}from"./axios-DsPaXkF5.js";import{S as k}from"./sweetalert2.all-B9kxGEux.js";import{_ as Xe,r as d,b as K,Q as He,l as a,Y as c,k as r,j as t,n as v,L as m,bn as f,F as S,Z as p,bo as x,a0 as Re,O as y,bp as ze,o as n,bq as de}from"./main-CJyx6GFz.js";import"./_commonjsHelpers-Cpj98o6Y.js";const Qe={name:"LeadsPage",setup(){const b=d([]),s=d(!0),q=d(""),e=d(""),O=d(!1),g=d([]),l=d({id:0,first_name:"",last_name:"",email:"",phone:"",tag:"",stage:""}),w=d({}),D=d({message:"",type:""}),N=d([]),U=d([]),Y=d([]),B=d(!1),Z=d(""),G=d([]),J=d(null),ie=d(""),X=d(!1),H=d(!1),L=d(null),M=d(""),I=d(1),C=d(10),W=K(()=>Math.ceil(b.value.length/C.value)),R=d(!1),z=d(!1),E=d(""),P=d(""),F=d(""),T=d(""),Q=d(!1),j=d(!1),$=d(!1),ee=d(!1),re=o=>{ie.value=o,Z.value=ue(o),G.value=me(o),B.value=!0},te=()=>{B.value=!1},ce=()=>{console.log("Selected Option:",J.value),te()},ue=o=>({listingAlert:"New Listing Alert",neighbourhoodAlert:"Neighbourhood Alert",openHouseAlert:"Open House Alert",actionPlan:"Action Plan",marketUpdates:"Market Updates",newsletter:"Real Estate Newsletter"})[o]||"Unknown Modal",me=o=>({listingAlert:[{value:"alert1",text:"Alert 1"},{value:"alert2",text:"Alert 2"}],neighbourhoodAlert:[{value:"neigh1",text:"Neighbourhood 1"},{value:"neigh2",text:"Neighbourhood 2"}],openHouseAlert:[{value:"house1",text:"House 1"},{value:"house2",text:"House 2"}],actionPlan:[{value:"plan1",text:"Plan 1"},{value:"plan2",text:"Plan 2"}],marketUpdates:[{value:"update1",text:"Update 1"},{value:"update2",text:"Update 2"}],newsletter:[{value:"news1",text:"Newsletter 1"},{value:"news2",text:"Newsletter 2"}]})[o]||[],ge=()=>{if(g.value.length===0){alert("No leads selected.");return}R.value=!0},le=()=>{R.value=!1,E.value=""},ve=()=>{if(g.value.length===0){alert("No leads selected.");return}z.value=!0},se=()=>{z.value=!1,P.value=""},he=async()=>{if(E.value.trim()===""){alert("Message cannot be empty.");return}try{await _.post("/leads/send-email",{lead_ids:g.value,message:E.value}),alert("Emails sent successfully."),le()}catch{alert("Failed to send emails.")}},_e=async()=>{if(P.value.trim()===""){alert("Message cannot be empty.");return}try{await _.post("/leads/send-sms",{lead_ids:g.value,message:P.value}),alert("SMS sent successfully."),se()}catch{alert("Failed to send SMS.")}},oe=async()=>{try{const o=await _.get("/leads");b.value=Array.isArray(o.data)?o.data:[]}catch{q.value="Failed to fetch leads."}finally{s.value=!1}},ae=async()=>{try{const o=await _.get("/items");N.value=o.data.tags,U.value=o.data.stages,Y.value=o.data.sources}catch(o){console.error("Failed to fetch items:",o)}},be=()=>{Q.value=!0},fe=()=>{Q.value=!1,F.value=""},ye=()=>{j.value=!0},we=()=>{j.value=!1,T.value=""},ke=async()=>{if(F.value.trim())try{const o=await _.post("/api/items",{name:F.value,type:"tag"});N.value.push(o.data.item),F.value="",$.value=!1,k.fire("Success","Tag added successfully","success")}catch(o){console.error("Failed to add tag:",o),k.fire("Error","Failed to add tag","error")}},Se=async()=>{if(T.value.trim())try{const o=await _.post("/api/items",{name:T.value,type:"stage"});U.value.push(o.data.item),T.value="",ee.value=!1,k.fire("Success","Stage added successfully","success")}catch(o){console.error("Failed to add stage:",o),k.fire("Error","Failed to add stage","error")}},ne=K(()=>b.value.filter(o=>o.first_name.toLowerCase().includes(e.value.toLowerCase()))),pe=o=>{const i=N.value.find(u=>u.id===o);return i?i.name:"N/A"},Le=o=>{const i=U.value.find(u=>u.id===o);return i?i.name:"N/A"},Me=()=>(w.value={first_name:l.value.first_name?"":"First name is required.",last_name:l.value.last_name?"":"Last name is required.",email:l.value.email&&/^\S+@\S+\.\S+$/.test(l.value.email)?"":"Valid email is required.",phone:l.value.phone&&/^\d{10}$/.test(l.value.phone)?"":"Valid phone number is required.",tag:l.value.tag?"":"Tag is required.",stage:l.value.stage?"":"Stage is required."},!Object.values(w.value).some(o=>o)),Ce=async()=>{if(g.value.length===0){h("No leads selected.","error");return}if((await k.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{const i=document.querySelector('meta[name="csrf-token"]'),u=i?i.getAttribute("content"):"";await _.post("/leads/delete",{lead_ids:g.value},{headers:{"X-CSRF-TOKEN":u}}),b.value=b.value.filter(A=>!g.value.includes(A.id)),g.value=[],k.fire("Deleted!","Selected leads have been deleted.","success")}catch{k.fire("Error!","Failed to delete leads.","error")}},Fe=o=>{o>=1&&o<=W.value&&(I.value=o)},Te=o=>{C.value=o,I.value=1},Ae=K(()=>{const o=(I.value-1)*C.value,i=o+C.value;return b.value.slice(o,i)}),xe=async()=>{if(g.value.length===0){h("No leads selected.","error");return}try{const o=await _.post("/leads/export",{lead_ids:g.value},{responseType:"blob"}),i=window.URL.createObjectURL(new Blob([o.data])),u=document.createElement("a");u.href=i,u.setAttribute("download","leads.csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u),h("Leads exported successfully!","success")}catch{h("Failed to export leads.","error")}},Ne=async o=>{const i=o.target.files[0];if(!i){h("No file selected.","error");return}const u=new FormData;u.append("file",i);try{const A=document.querySelector('meta[name="csrf-token"]'),Be=A?A.getAttribute("content"):"";await _.post("/leads/import",u,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":Be}}),await oe(),h("Leads imported successfully!","success")}catch{h("Failed to import leads.","error")}},Ue=()=>{V(),alert("Indirect File Import option selected")},Ie=()=>{X.value=!0},V=()=>{X.value=!1,H.value=!1,L.value=null,M.value=""},Ee=()=>{H.value=!0},Pe=o=>{const i=o.target.files[0];i&&i.type==="text/csv"?(L.value=i,M.value=""):(L.value=null,M.value="Please select a valid CSV file.")},Ve=()=>{if(!L.value){M.value="No file selected or invalid file type.";return}console.log("CSV file selected:",L.value),V()},qe=()=>{V(),alert("Direct File Import option selected")},h=(o,i)=>{D.value={message:o,type:i},setTimeout(()=>{D.value.message=""},5e3)},Oe=async()=>{if(Me())try{const o=document.querySelector('meta[name="csrf-token"]'),i=o?o.getAttribute("content"):"",u=await _.post("/leads",{first_name:l.value.first_name,last_name:l.value.last_name,email:l.value.email,phone:l.value.phone,tag:String(l.value.tag),stage:String(l.value.stage)},{headers:{"X-CSRF-TOKEN":i}});l.value={id:0,first_name:"",last_name:"",email:"",phone:"",tag:"",stage:""},O.value=!1,b.value.push(u.data),h("Lead created successfully!","success")}catch{h("Failed to create lead.","error")}},De=o=>{o.target.checked?g.value=ne.value.map(i=>i.id):g.value=[]};return He(async()=>{await oe(),await ae()}),{leads:b,loading:s,error:q,searchQuery:e,filteredLeads:ne,showForm:O,newLead:l,errors:w,selectedLeads:g,submitForm:Oe,toggleSelectAll:De,toast:D,getTagValue:pe,getStageValue:Le,tags:N,stages:U,sources:Y,fetchItems:ae,showImportModal:X,openImportModal:Ie,closeImportModal:V,importDirectFile:qe,importIndirectFile:Ue,showFileInput:H,showFileUploadField:Ee,handleFileUpload:Pe,submitCsvFile:Ve,fileError:M,deleteLeads:Ce,exportLeads:xe,importLeads:Ne,currentPage:I,pageSize:C,totalPages:W,changePage:Fe,setPageSize:Te,paginatedLeads:Ae,showEmailModal:R,showSmsModal:z,emailMessage:E,smsMessage:P,openEmailModal:ge,closeEmailModal:le,openSmsModal:ve,closeSmsModal:se,sendEmail:he,sendSms:_e,showToast:h,newTag:F,newStage:T,showTagModal:Q,showStageModal:j,showAddTagInput:$,showAddStageInput:ee,openTagModal:be,closeTagModal:fe,openStageModal:ye,closeStageModal:we,addTag:ke,addStage:Se,openModal:re,submitAction:ce,showModal:B,modalTitle:Z,modalOptions:G,selectedOption:J,closeModal:te}}},je={class:"leads-container"},Ke={key:0,class:"loading"},Ye={key:1,class:"error"},Ze={class:"leads-header"},Ge=t("div",{class:"leads-section"},[t("ul",null,[t("li",{class:"total-leads"},"All Leads"),t("li",{class:"total-leads"},"My Leads")])],-1),Je={class:"icon-section"},We={class:"selected-count total-leads"},$e=t("li",{class:"total-leads"},[t("i",{class:"fa-solid fa-plus"})],-1),et=["disabled"],tt=t("span",null,"Delete",-1),lt=t("i",{class:"fa-solid fa-trash-can-arrow-up"},null,-1),st=[tt,lt],ot=["disabled"],at=t("span",null,"Email",-1),nt=t("i",{class:"fa-solid fa-envelope"},null,-1),dt=[at,nt],it=["disabled"],rt=t("span",null,"Smart SMS",-1),ct=t("i",{class:"fa-solid fa-comment-dots"},null,-1),ut=[rt,ct],mt=["disabled"],gt=t("span",null,"Tags",-1),vt=t("i",{class:"fa-solid fa-tags"},null,-1),ht=[gt,vt],_t=["disabled"],bt=t("span",null,"Stage",-1),ft=t("i",{class:"fa-solid fa-table-cells"},null,-1),yt=[bt,ft],wt=["disabled"],kt=t("span",null,"New Listing Alert",-1),St=t("i",{class:"fa-solid fa-bell"},null,-1),pt=[kt,St],Lt=["disabled"],Mt=t("span",null,"Neighbourhood Alert",-1),Ct=t("i",{class:"fa-solid fa-map-location-dot"},null,-1),Ft=[Mt,Ct],Tt=["disabled"],At=t("span",null,"Open House Alert",-1),xt=t("i",{class:"fa-solid fa-circle-exclamation"},null,-1),Nt=[At,xt],Ut=["disabled"],It=t("span",null,"Action Plan",-1),Et=t("i",{class:"fa-solid fa-plus"},null,-1),Pt=[It,Et],Vt=["disabled"],qt=t("span",null,"Market Updates",-1),Ot=t("i",{class:"fa fa-bar-chart","aria-hidden":"true"},null,-1),Dt=[qt,Ot],Bt=["disabled"],Xt=t("span",null,"Real Estate Newsletter",-1),Ht=t("i",{class:"fa-solid fa-envelope-open-text"},null,-1),Rt=[Xt,Ht],zt=["disabled"],Qt=t("span",null,"Lead Transfer",-1),jt=t("i",{class:"fa-solid fa-right-left"},null,-1),Kt=[Qt,jt],Yt=["disabled"],Zt=t("span",null,"Export Lead",-1),Gt=t("i",{class:"fa-solid fa-file-export"},null,-1),Jt=[Zt,Gt],Wt=t("span",null,"Import",-1),$t=t("i",{class:"fa-solid fa-file-import"},null,-1),el=[Wt,$t],tl={key:2,class:"modal-overlay"},ll={class:"modal-container"},sl=t("h2",null,"Select Import Type",-1),ol={key:0,class:"import-options"},al={key:1,class:"file-upload-container"},nl={key:0,class:"error-message"},dl={key:3,class:"modal"},il={class:"modal-content"},rl=t("h2",null,"Send SMS",-1),cl={key:4,class:"tag-modal-overlay"},ul={class:"tag-modal-container"},ml=t("h3",null,"Select Tags",-1),gl=["value","onUpdate:modelValue"],vl={key:0},hl={key:5,class:"stage-modal-overlay"},_l={class:"stage-modal-container"},bl=t("h3",null,"Select Stage",-1),fl=["value"],yl={key:0},wl={key:6,class:"modal-overlay"},kl={class:"modal-container"},Sl=["value"],pl={class:"modal-buttons"},Ll={key:7},Ml={class:"header"},Cl={class:"total-leads"},Fl=ze('<div class="total-leads">Last 7 Days</div><div class="total-leads">Hot</div><div class="total-leads">Buyer</div><div class="total-leads">Seller</div><div class="total-leads">Closed</div>',5),Tl={key:8,class:"form-overlay"},Al={class:"form-container"},xl=t("h2",null,"Create New Lead",-1),Nl={key:0,class:"error"},Ul={key:0,class:"error"},Il={key:0,class:"error"},El={key:0,class:"error"},Pl=["value"],Vl={key:0,class:"error"},ql=["value"],Ol={key:0,class:"error"},Dl=t("button",{type:"submit",id:"submit_button"},"Submit",-1),Bl={key:9},Xl=t("label",{for:"pageSize"},"Rows per page:",-1),Hl=t("option",{value:"5"},"5",-1),Rl=t("option",{value:"10"},"10",-1),zl=t("option",{value:"25"},"25",-1),Ql=t("option",{value:"50"},"50",-1),jl=[Hl,Rl,zl,Ql],Kl={key:0,id:"leadsTable",class:"table table-striped table-bordered leads-table"},Yl={class:"custom-checkbox-label"},Zl=t("span",{class:"custom-checkbox-span"},null,-1),Gl=t("th",null,"First Name",-1),Jl=t("th",null,"Last Name",-1),Wl=t("th",null,"Phone",-1),$l=t("th",null,"Email",-1),es=t("th",null,"Activity",-1),ts=t("th",null,"Created",-1),ls=t("th",null,"Tag",-1),ss=t("th",null,"Stage",-1),os=t("th",null,"Source",-1),as={class:"custom-checkbox-label"},ns=["value"],ds=t("span",{class:"custom-checkbox-span"},null,-1),is={key:1,class:"no-leads"},rs=["disabled"],cs=["disabled"];function us(b,s,q,e,O,g){return n(),a("div",je,[e.loading?(n(),a("div",Ke,"Loading leads...")):c("",!0),e.error?(n(),a("div",Ye,r(e.error),1)):c("",!0),t("div",Ze,[Ge,t("div",Je,[t("ul",null,[t("li",We," Selected Leads: "+r(e.selectedLeads.length),1),$e,t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),onClick:s[0]||(s[0]=(...l)=>e.deleteLeads&&e.deleteLeads(...l)),disabled:e.selectedLeads.length===0},st,10,et),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),onClick:s[1]||(s[1]=(...l)=>e.openEmailModal&&e.openEmailModal(...l)),disabled:e.selectedLeads.length===0},dt,10,ot),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),onClick:s[2]||(s[2]=(...l)=>e.openSmsModal&&e.openSmsModal(...l)),disabled:e.selectedLeads.length===0},ut,10,it),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[3]||(s[3]=(...l)=>e.openTagModal&&e.openTagModal(...l))},ht,10,mt),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[4]||(s[4]=(...l)=>e.openStageModal&&e.openStageModal(...l))},yt,10,_t),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[5]||(s[5]=l=>e.openModal("listingAlert"))},pt,10,wt),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[6]||(s[6]=l=>e.openModal("neighbourhoodAlert"))},Ft,10,Lt),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[7]||(s[7]=l=>e.openModal("openHouseAlert"))},Nt,10,Tt),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[8]||(s[8]=l=>e.openModal("actionPlan"))},Pt,10,Ut),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[9]||(s[9]=l=>e.openModal("marketUpdates"))},Dt,10,Vt),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[10]||(s[10]=l=>e.openModal("newsletter"))},Rt,10,Bt),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0},Kt,10,zt),t("li",{class:v(["total-leads",{disabled:e.selectedLeads.length===0}]),onClick:s[11]||(s[11]=(...l)=>e.exportLeads&&e.exportLeads(...l)),disabled:e.selectedLeads.length===0},Jt,10,Yt),t("li",{class:"total-leads",onClick:s[12]||(s[12]=(...l)=>e.openImportModal&&e.openImportModal(...l))},el)])])]),e.showImportModal?(n(),a("div",tl,[t("div",ll,[t("button",{type:"button",onClick:s[13]||(s[13]=(...l)=>e.closeImportModal&&e.closeImportModal(...l)),class:"close-button"},"X"),sl,e.showFileInput?c("",!0):(n(),a("div",ol,[t("button",{onClick:s[14]||(s[14]=(...l)=>e.importDirectFile&&e.importDirectFile(...l)),class:"import-button"},"Direct File Import"),t("button",{onClick:s[15]||(s[15]=(...l)=>e.showFileUploadField&&e.showFileUploadField(...l)),class:"import-button"},"Indirect File Import")])),e.showFileInput?(n(),a("div",al,[t("input",{type:"file",onChange:s[16]||(s[16]=(...l)=>e.handleFileUpload&&e.handleFileUpload(...l)),accept:".csv"},null,32),t("button",{onClick:s[17]||(s[17]=(...l)=>e.submitCsvFile&&e.submitCsvFile(...l)),class:"submit-button"},"Submit CSV"),e.fileError?(n(),a("p",nl,r(e.fileError),1)):c("",!0)])):c("",!0)])])):c("",!0),e.showSmsModal?(n(),a("div",dl,[t("div",il,[t("span",{class:"close",onClick:s[18]||(s[18]=(...l)=>e.closeSmsModal&&e.closeSmsModal(...l))},"Ã—"),rl,m(t("textarea",{"onUpdate:modelValue":s[19]||(s[19]=l=>e.smsMessage=l),placeholder:"Enter your message here"},null,512),[[f,e.smsMessage]]),t("button",{onClick:s[20]||(s[20]=(...l)=>e.sendSms&&e.sendSms(...l))},"Send SMS")])])):c("",!0),e.showTagModal?(n(),a("div",cl,[t("div",ul,[t("button",{type:"button",onClick:s[21]||(s[21]=(...l)=>e.closeTagModal&&e.closeTagModal(...l)),class:"close-button"},"X"),ml,(n(!0),a(S,null,p(e.tags,l=>(n(),a("div",{key:l.id},[m(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":w=>e.newLead.tag=w},null,8,gl),[[de,e.newLead.tag]]),y(" "+r(l.name),1)]))),128)),t("button",{onClick:s[22]||(s[22]=l=>e.showAddTagInput=!e.showAddTagInput),class:"add-button"},"Add Tag"),e.showAddTagInput?(n(),a("div",vl,[m(t("input",{"onUpdate:modelValue":s[23]||(s[23]=l=>e.newTag=l),placeholder:"Enter new tag"},null,512),[[f,e.newTag]]),t("button",{onClick:s[24]||(s[24]=(...l)=>e.addTag&&e.addTag(...l)),class:"submit-button"},"Add")])):c("",!0),t("button",{onClick:s[25]||(s[25]=(...l)=>e.closeTagModal&&e.closeTagModal(...l)),class:"submit-button"},"Close")])])):c("",!0),e.showStageModal?(n(),a("div",hl,[t("div",_l,[t("button",{type:"button",onClick:s[26]||(s[26]=(...l)=>e.closeStageModal&&e.closeStageModal(...l)),class:"close-button"},"X"),bl,m(t("select",{"onUpdate:modelValue":s[27]||(s[27]=l=>e.newLead.stage=l)},[(n(!0),a(S,null,p(e.stages,l=>(n(),a("option",{key:l.id,value:l.id},r(l.name),9,fl))),128))],512),[[x,e.newLead.stage]]),t("button",{onClick:s[28]||(s[28]=l=>e.showAddStageInput=!e.showAddStageInput),class:"add-button"},"Add Stage"),e.showAddStageInput?(n(),a("div",yl,[m(t("input",{"onUpdate:modelValue":s[29]||(s[29]=l=>e.newStage=l),placeholder:"Enter new stage"},null,512),[[f,e.newStage]]),t("button",{onClick:s[30]||(s[30]=(...l)=>e.addStage&&e.addStage(...l)),class:"submit-button"},"Add")])):c("",!0),t("button",{onClick:s[31]||(s[31]=(...l)=>e.closeStageModal&&e.closeStageModal(...l)),class:"submit-button"},"Close")])])):c("",!0),e.showModal?(n(),a("div",wl,[t("div",kl,[t("button",{type:"button",onClick:s[32]||(s[32]=(...l)=>e.closeModal&&e.closeModal(...l)),class:"close-button"},"X"),t("h2",null,r(e.modalTitle),1),m(t("select",{"onUpdate:modelValue":s[33]||(s[33]=l=>e.selectedOption=l),class:"open_modal_drop-box"},[(n(!0),a(S,null,p(e.modalOptions,l=>(n(),a("option",{key:l.value,value:l.value},r(l.text),9,Sl))),128))],512),[[x,e.selectedOption]]),t("div",pl,[t("button",{onClick:s[34]||(s[34]=(...l)=>e.submitAction&&e.submitAction(...l)),class:"submit-button"},"Submit"),t("button",{onClick:s[35]||(s[35]=(...l)=>e.closeModal&&e.closeModal(...l)),class:"cancel-button"},"Cancel")])])])):c("",!0),!e.loading&&!e.error?(n(),a("div",Ll,[t("div",Ml,[m(t("input",{"onUpdate:modelValue":s[36]||(s[36]=l=>e.searchQuery=l),type:"text",placeholder:"Search leads by name...",class:"search-bar"},null,512),[[f,e.searchQuery]]),t("div",Cl,"Total Leads: "+r(e.filteredLeads.length),1),Fl,t("button",{onClick:s[37]||(s[37]=l=>e.showForm=!0),class:"create-new-button"},"+ Create New")])])):c("",!0),e.showForm?(n(),a("div",Tl,[t("div",Al,[t("button",{type:"button",onClick:s[38]||(s[38]=l=>e.showForm=!1),id:"cancel_button"},"X"),xl,t("form",{onSubmit:s[45]||(s[45]=Re((...l)=>e.submitForm&&e.submitForm(...l),["prevent"]))},[t("label",null,[y(" First Name: "),m(t("input",{"onUpdate:modelValue":s[39]||(s[39]=l=>e.newLead.first_name=l),type:"text",required:""},null,512),[[f,e.newLead.first_name]]),e.errors.first_name?(n(),a("span",Nl,r(e.errors.first_name),1)):c("",!0)]),t("label",null,[y(" Last Name: "),m(t("input",{"onUpdate:modelValue":s[40]||(s[40]=l=>e.newLead.last_name=l),type:"text",required:""},null,512),[[f,e.newLead.last_name]]),e.errors.last_name?(n(),a("span",Ul,r(e.errors.last_name),1)):c("",!0)]),t("label",null,[y(" Email: "),m(t("input",{"onUpdate:modelValue":s[41]||(s[41]=l=>e.newLead.email=l),type:"email",required:""},null,512),[[f,e.newLead.email]]),e.errors.email?(n(),a("span",Il,r(e.errors.email),1)):c("",!0)]),t("label",null,[y(" Phone: "),m(t("input",{"onUpdate:modelValue":s[42]||(s[42]=l=>e.newLead.phone=l),type:"tel",required:""},null,512),[[f,e.newLead.phone]]),e.errors.phone?(n(),a("span",El,r(e.errors.phone),1)):c("",!0)]),t("label",null,[y(" Tag: "),m(t("select",{"onUpdate:modelValue":s[43]||(s[43]=l=>e.newLead.tag=l),required:""},[(n(!0),a(S,null,p(e.tags,l=>(n(),a("option",{key:l.id,value:l.id},r(l.name),9,Pl))),128))],512),[[x,e.newLead.tag]]),e.errors.tag?(n(),a("span",Vl,r(e.errors.tag),1)):c("",!0)]),t("label",null,[y(" Stage: "),m(t("select",{"onUpdate:modelValue":s[44]||(s[44]=l=>e.newLead.stage=l),required:""},[(n(!0),a(S,null,p(e.stages,l=>(n(),a("option",{key:l.id,value:l.id},r(l.name),9,ql))),128))],512),[[x,e.newLead.stage]]),e.errors.stage?(n(),a("span",Ol,r(e.errors.stage),1)):c("",!0)]),Dl],32)])])):c("",!0),!e.loading&&!e.error?(n(),a("div",Bl,[t("div",null,[Xl,m(t("select",{"onUpdate:modelValue":s[46]||(s[46]=l=>e.pageSize=l),onChange:s[47]||(s[47]=l=>e.setPageSize(Number(l.target.value)))},jl,544),[[x,e.pageSize]])]),e.filteredLeads.length?(n(),a("table",Kl,[t("thead",null,[t("tr",null,[t("th",null,[t("label",Yl,[t("input",{type:"checkbox",onChange:s[48]||(s[48]=(...l)=>e.toggleSelectAll&&e.toggleSelectAll(...l)),class:"custom-checkbox"},null,32),Zl])]),Gl,Jl,Wl,$l,es,ts,ls,ss,os])]),t("tbody",null,[(n(!0),a(S,null,p(e.paginatedLeads,l=>(n(),a("tr",{key:l.id},[t("td",null,[t("label",as,[m(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":s[49]||(s[49]=w=>e.selectedLeads=w),class:"custom-checkbox"},null,8,ns),[[de,e.selectedLeads]]),ds])]),t("td",null,r(l.first_name),1),t("td",null,r(l.last_name),1),t("td",null,r(l.phone),1),t("td",null,r(l.email),1),t("td",null,r(l.activity||"N/A"),1),t("td",null,r(new Date(l.created_at).toLocaleDateString()),1),t("td",null,r(l.tag||"N/A"),1),t("td",null,r(l.stage||"N/A"),1),t("td",null,r(l.source||"N/A"),1)]))),128))])])):c("",!0),e.filteredLeads.length===0?(n(),a("div",is,"No leads available.")):c("",!0)])):c("",!0),e.toast.message?(n(),a("div",{key:10,class:v(`toast ${e.toast.type}`)},[y(r(e.toast.message)+" ",1),t("button",{onClick:s[50]||(s[50]=l=>e.toast.message=""),class:"toast-close-button"},"X")],2)):c("",!0),t("div",null,[t("button",{onClick:s[51]||(s[51]=l=>e.changePage(e.currentPage-1)),disabled:e.currentPage===1},"Previous",8,rs),t("span",null,"Page "+r(e.currentPage)+" of "+r(e.totalPages),1),t("button",{onClick:s[52]||(s[52]=l=>e.changePage(e.currentPage+1)),disabled:e.currentPage===e.totalPages},"Next",8,cs)])])}const _s=Xe(Qe,[["render",us]]);export{_s as default};
