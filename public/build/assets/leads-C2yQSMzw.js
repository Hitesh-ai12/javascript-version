import{a as _}from"./axios-DsPaXkF5.js";import{S}from"./sweetalert2.all-B9kxGEux.js";import{_ as Re,r as d,b as Y,Q as ze,l as a,Y as c,k as r,j as t,n as g,L as v,bn as f,F as p,Z as L,bo as N,a0 as Qe,O as y,bp as je,o as n,bq as Ke}from"./main-CK36iqPX.js";import"./_commonjsHelpers-Cpj98o6Y.js";const Ye={name:"LeadsPage",setup(){const b=d([]),s=d(!0),O=d(""),e=d(""),D=d(!1),m=d([]),l=d({id:0,first_name:"",last_name:"",email:"",phone:"",tag:"",stage:""}),w=d({}),B=d({message:"",type:""}),U=d([]),E=d([]),Z=d([]),X=d(!1),G=d(""),J=d([]),W=d(null),ie=d(""),k=d(new Set),H=d(!1),R=d(!1),M=d(null),C=d(""),I=d(1),T=d(10),$=Y(()=>Math.ceil(b.value.length/T.value)),z=d(!1),Q=d(!1),P=d(""),V=d(""),A=d(""),F=d(""),j=d(!1),K=d(!1),ee=d(!1),te=d(!1),re=o=>{ie.value=o,G.value=ge(o),J.value=ve(o),X.value=!0},le=()=>{X.value=!1},ce=o=>k.value.has(o),ue=o=>{k.value.has(o)?k.value.delete(o):k.value.add(o),l.value.tag=Array.from(k.value)},me=()=>{console.log("Selected Option:",W.value),le()},ge=o=>({listingAlert:"New Listing Alert",neighbourhoodAlert:"Neighbourhood Alert",openHouseAlert:"Open House Alert",actionPlan:"Action Plan",marketUpdates:"Market Updates",newsletter:"Real Estate Newsletter"})[o]||"Unknown Modal",ve=o=>({listingAlert:[{value:"alert1",text:"Alert 1"},{value:"alert2",text:"Alert 2"}],neighbourhoodAlert:[{value:"neigh1",text:"Neighbourhood 1"},{value:"neigh2",text:"Neighbourhood 2"}],openHouseAlert:[{value:"house1",text:"House 1"},{value:"house2",text:"House 2"}],actionPlan:[{value:"plan1",text:"Plan 1"},{value:"plan2",text:"Plan 2"}],marketUpdates:[{value:"update1",text:"Update 1"},{value:"update2",text:"Update 2"}],newsletter:[{value:"news1",text:"Newsletter 1"},{value:"news2",text:"Newsletter 2"}]})[o]||[],he=()=>{if(m.value.length===0){alert("No leads selected.");return}z.value=!0},se=()=>{z.value=!1,P.value=""},_e=()=>{if(m.value.length===0){alert("No leads selected.");return}Q.value=!0},oe=()=>{Q.value=!1,V.value=""},be=async()=>{if(P.value.trim()===""){alert("Message cannot be empty.");return}try{await _.post("/leads/send-email",{lead_ids:m.value,message:P.value}),alert("Emails sent successfully."),se()}catch{alert("Failed to send emails.")}},fe=async()=>{if(V.value.trim()===""){alert("Message cannot be empty.");return}try{await _.post("/leads/send-sms",{lead_ids:m.value,message:V.value}),alert("SMS sent successfully."),oe()}catch{alert("Failed to send SMS.")}},ae=async()=>{try{const o=await _.get("/leads");b.value=Array.isArray(o.data)?o.data:[]}catch{O.value="Failed to fetch leads."}finally{s.value=!1}},ne=async()=>{try{const o=await _.get("/items");U.value=o.data.tags,E.value=o.data.stages,Z.value=o.data.sources}catch(o){console.error("Failed to fetch items:",o)}},ye=()=>{j.value=!0},Se=()=>{j.value=!1,A.value=""},we=()=>{K.value=!0},ke=()=>{K.value=!1,F.value=""},pe=async()=>{if(A.value.trim())try{const o=await _.post("/api/items",{name:A.value,type:"tag"});U.value.push(o.data.item),A.value="",ee.value=!1,S.fire("Success","Tag added successfully","success")}catch(o){console.error("Failed to add tag:",o),S.fire("Error","Failed to add tag","error")}},Le=async()=>{if(F.value.trim())try{const o=await _.post("/api/items",{name:F.value,type:"stage"});E.value.push(o.data.item),F.value="",te.value=!1,S.fire("Success","Stage added successfully","success")}catch(o){console.error("Failed to add stage:",o),S.fire("Error","Failed to add stage","error")}},de=Y(()=>b.value.filter(o=>o.first_name.toLowerCase().includes(e.value.toLowerCase()))),Me=o=>{const i=U.value.find(u=>u.id===o);return i?i.name:"N/A"},Ce=o=>{const i=E.value.find(u=>u.id===o);return i?i.name:"N/A"},Te=()=>(w.value={first_name:l.value.first_name?"":"First name is required.",last_name:l.value.last_name?"":"Last name is required.",email:l.value.email&&/^\S+@\S+\.\S+$/.test(l.value.email)?"":"Valid email is required.",phone:l.value.phone&&/^\d{10}$/.test(l.value.phone)?"":"Valid phone number is required.",tag:l.value.tag?"":"Tag is required.",stage:l.value.stage?"":"Stage is required."},!Object.values(w.value).some(o=>o)),Ae=async()=>{if(m.value.length===0){h("No leads selected.","error");return}if((await S.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{const i=document.querySelector('meta[name="csrf-token"]'),u=i?i.getAttribute("content"):"";await _.post("/leads/delete",{lead_ids:m.value},{headers:{"X-CSRF-TOKEN":u}}),b.value=b.value.filter(x=>!m.value.includes(x.id)),m.value=[],S.fire("Deleted!","Selected leads have been deleted.","success")}catch{S.fire("Error!","Failed to delete leads.","error")}},Fe=o=>{o>=1&&o<=$.value&&(I.value=o)},xe=o=>{T.value=o,I.value=1},Ne=Y(()=>{const o=(I.value-1)*T.value,i=o+T.value;return b.value.slice(o,i)}),Ue=async()=>{if(m.value.length===0){h("No leads selected.","error");return}try{const o=await _.post("/leads/export",{lead_ids:m.value},{responseType:"blob"}),i=window.URL.createObjectURL(new Blob([o.data])),u=document.createElement("a");u.href=i,u.setAttribute("download","leads.csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u),h("Leads exported successfully!","success")}catch{h("Failed to export leads.","error")}},Ee=async o=>{const i=o.target.files[0];if(!i){h("No file selected.","error");return}const u=new FormData;u.append("file",i);try{const x=document.querySelector('meta[name="csrf-token"]'),He=x?x.getAttribute("content"):"";await _.post("/leads/import",u,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":He}}),await ae(),h("Leads imported successfully!","success")}catch{h("Failed to import leads.","error")}},Ie=()=>{q(),alert("Indirect File Import option selected")},Pe=()=>{H.value=!0},q=()=>{H.value=!1,R.value=!1,M.value=null,C.value=""},Ve=()=>{R.value=!0},qe=o=>{const i=o.target.files[0];i&&i.type==="text/csv"?(M.value=i,C.value=""):(M.value=null,C.value="Please select a valid CSV file.")},Oe=()=>{if(!M.value){C.value="No file selected or invalid file type.";return}console.log("CSV file selected:",M.value),q()},De=()=>{q(),alert("Direct File Import option selected")},h=(o,i)=>{B.value={message:o,type:i},setTimeout(()=>{B.value.message=""},5e3)},Be=async()=>{if(Te())try{const o=document.querySelector('meta[name="csrf-token"]'),i=o?o.getAttribute("content"):"",u=await _.post("/leads",{first_name:l.value.first_name,last_name:l.value.last_name,email:l.value.email,phone:l.value.phone,tag:Array.from(k.value),stage:String(l.value.stage)},{headers:{"X-CSRF-TOKEN":i}});l.value={id:0,first_name:"",last_name:"",email:"",phone:"",tag:"",stage:""},D.value=!1,b.value.push(u.data),h("Lead created successfully!","success")}catch{h("Failed to create lead.","error")}},Xe=o=>{o.target.checked?m.value=de.value.map(i=>i.id):m.value=[]};return ze(async()=>{await ae(),await ne()}),{leads:b,loading:s,error:O,searchQuery:e,filteredLeads:de,showForm:D,newLead:l,errors:w,selectedLeads:m,submitForm:Be,toggleSelectAll:Xe,toast:B,getTagValue:Me,getStageValue:Ce,tags:U,stages:E,sources:Z,fetchItems:ne,showImportModal:H,openImportModal:Pe,closeImportModal:q,importDirectFile:De,importIndirectFile:Ie,showFileInput:R,showFileUploadField:Ve,handleFileUpload:qe,submitCsvFile:Oe,fileError:C,deleteLeads:Ae,exportLeads:Ue,importLeads:Ee,currentPage:I,pageSize:T,totalPages:$,changePage:Fe,setPageSize:xe,paginatedLeads:Ne,showEmailModal:z,showSmsModal:Q,emailMessage:P,smsMessage:V,openEmailModal:he,closeEmailModal:se,openSmsModal:_e,closeSmsModal:oe,sendEmail:be,sendSms:fe,showToast:h,newTag:A,newStage:F,showTagModal:j,showStageModal:K,showAddTagInput:ee,showAddStageInput:te,openTagModal:ye,closeTagModal:Se,openStageModal:we,closeStageModal:ke,addTag:pe,addStage:Le,openModal:re,submitAction:me,showModal:X,modalTitle:G,modalOptions:J,selectedOption:W,isTagSelected:ce,toggleTagSelection:ue,closeModal:le}}},Ze={class:"leads-container"},Ge={key:0,class:"loading"},Je={key:1,class:"error"},We={class:"leads-header"},$e=t("div",{class:"leads-section"},[t("ul",null,[t("li",{class:"total-leads"},"All Leads"),t("li",{class:"total-leads"},"My Leads")])],-1),et={class:"icon-section"},tt={class:"selected-count total-leads"},lt=t("li",{class:"total-leads"},[t("i",{class:"fa-solid fa-plus"})],-1),st=["disabled"],ot=t("span",null,"Delete",-1),at=t("i",{class:"fa-solid fa-trash-can-arrow-up"},null,-1),nt=[ot,at],dt=["disabled"],it=t("span",null,"Email",-1),rt=t("i",{class:"fa-solid fa-envelope"},null,-1),ct=[it,rt],ut=["disabled"],mt=t("span",null,"Smart SMS",-1),gt=t("i",{class:"fa-solid fa-comment-dots"},null,-1),vt=[mt,gt],ht=["disabled"],_t=t("span",null,"Tags",-1),bt=t("i",{class:"fa-solid fa-tags"},null,-1),ft=[_t,bt],yt=["disabled"],St=t("span",null,"Stage",-1),wt=t("i",{class:"fa-solid fa-table-cells"},null,-1),kt=[St,wt],pt=["disabled"],Lt=t("span",null,"New Listing Alert",-1),Mt=t("i",{class:"fa-solid fa-bell"},null,-1),Ct=[Lt,Mt],Tt=["disabled"],At=t("span",null,"Neighbourhood Alert",-1),Ft=t("i",{class:"fa-solid fa-map-location-dot"},null,-1),xt=[At,Ft],Nt=["disabled"],Ut=t("span",null,"Open House Alert",-1),Et=t("i",{class:"fa-solid fa-circle-exclamation"},null,-1),It=[Ut,Et],Pt=["disabled"],Vt=t("span",null,"Action Plan",-1),qt=t("i",{class:"fa-solid fa-plus"},null,-1),Ot=[Vt,qt],Dt=["disabled"],Bt=t("span",null,"Market Updates",-1),Xt=t("i",{class:"fa fa-bar-chart","aria-hidden":"true"},null,-1),Ht=[Bt,Xt],Rt=["disabled"],zt=t("span",null,"Real Estate Newsletter",-1),Qt=t("i",{class:"fa-solid fa-envelope-open-text"},null,-1),jt=[zt,Qt],Kt=["disabled"],Yt=t("span",null,"Lead Transfer",-1),Zt=t("i",{class:"fa-solid fa-right-left"},null,-1),Gt=[Yt,Zt],Jt=["disabled"],Wt=t("span",null,"Export Lead",-1),$t=t("i",{class:"fa-solid fa-file-export"},null,-1),el=[Wt,$t],tl=t("span",null,"Import",-1),ll=t("i",{class:"fa-solid fa-file-import"},null,-1),sl=[tl,ll],ol={key:2,class:"modal-overlay"},al={class:"modal-container"},nl=t("h2",null,"Select Import Type",-1),dl={key:0,class:"import-options"},il={key:1,class:"file-upload-container"},rl={key:0,class:"error-message"},cl={key:3,class:"modal"},ul={class:"modal-content"},ml=t("h2",null,"Send SMS",-1),gl={key:4,class:"tag-modal-overlay"},vl={class:"tag-modal-container"},hl=t("h3",null,"Select Tags",-1),_l={class:"modal_tags"},bl=["value","checked","onChange"],fl={key:0},yl={key:5,class:"stage-modal-overlay"},Sl={class:"stage-modal-container"},wl=t("h3",null,"Select Stage",-1),kl={key:0},pl=["value"],Ll={key:6,class:"modal-overlay"},Ml={class:"modal-container"},Cl=["value"],Tl={class:"modal-buttons"},Al={key:7},Fl={class:"header"},xl={class:"total-leads"},Nl=je('<div class="total-leads">Last 7 Days</div><div class="total-leads">Hot</div><div class="total-leads">Buyer</div><div class="total-leads">Seller</div><div class="total-leads">Closed</div>',5),Ul={key:8,class:"form-overlay"},El={class:"form-container"},Il=t("h2",null,"Create New Lead",-1),Pl={key:0,class:"error"},Vl={key:0,class:"error"},ql={key:0,class:"error"},Ol={key:0,class:"error"},Dl=["value"],Bl={key:0,class:"error"},Xl=["value"],Hl={key:0,class:"error"},Rl=t("button",{type:"submit",id:"submit_button"},"Submit",-1),zl={key:9},Ql=t("label",{for:"pageSize"},"Rows per page:",-1),jl=t("option",{value:"5"},"5",-1),Kl=t("option",{value:"10"},"10",-1),Yl=t("option",{value:"25"},"25",-1),Zl=t("option",{value:"50"},"50",-1),Gl=[jl,Kl,Yl,Zl],Jl={key:0,id:"leadsTable",class:"table table-striped table-bordered leads-table"},Wl={class:"custom-checkbox-label"},$l=t("span",{class:"custom-checkbox-span"},null,-1),es=t("th",null,"First Name",-1),ts=t("th",null,"Last Name",-1),ls=t("th",null,"Phone",-1),ss=t("th",null,"Email",-1),os=t("th",null,"Activity",-1),as=t("th",null,"Created",-1),ns=t("th",null,"Tag",-1),ds=t("th",null,"Stage",-1),is=t("th",null,"Source",-1),rs={class:"custom-checkbox-label"},cs=["value"],us=t("span",{class:"custom-checkbox-span"},null,-1),ms={key:1,class:"no-leads"},gs=["disabled"],vs=["disabled"];function hs(b,s,O,e,D,m){return n(),a("div",Ze,[e.loading?(n(),a("div",Ge,"Loading leads...")):c("",!0),e.error?(n(),a("div",Je,r(e.error),1)):c("",!0),t("div",We,[$e,t("div",et,[t("ul",null,[t("li",tt," Selected Leads: "+r(e.selectedLeads.length),1),lt,t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),onClick:s[0]||(s[0]=(...l)=>e.deleteLeads&&e.deleteLeads(...l)),disabled:e.selectedLeads.length===0},nt,10,st),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),onClick:s[1]||(s[1]=(...l)=>e.openEmailModal&&e.openEmailModal(...l)),disabled:e.selectedLeads.length===0},ct,10,dt),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),onClick:s[2]||(s[2]=(...l)=>e.openSmsModal&&e.openSmsModal(...l)),disabled:e.selectedLeads.length===0},vt,10,ut),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[3]||(s[3]=(...l)=>e.openTagModal&&e.openTagModal(...l))},ft,10,ht),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[4]||(s[4]=(...l)=>e.openStageModal&&e.openStageModal(...l))},kt,10,yt),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[5]||(s[5]=l=>e.openModal("listingAlert"))},Ct,10,pt),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[6]||(s[6]=l=>e.openModal("neighbourhoodAlert"))},xt,10,Tt),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[7]||(s[7]=l=>e.openModal("openHouseAlert"))},It,10,Nt),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[8]||(s[8]=l=>e.openModal("actionPlan"))},Ot,10,Pt),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[9]||(s[9]=l=>e.openModal("marketUpdates"))},Ht,10,Dt),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0,onClick:s[10]||(s[10]=l=>e.openModal("newsletter"))},jt,10,Rt),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),disabled:e.selectedLeads.length===0},Gt,10,Kt),t("li",{class:g(["total-leads",{disabled:e.selectedLeads.length===0}]),onClick:s[11]||(s[11]=(...l)=>e.exportLeads&&e.exportLeads(...l)),disabled:e.selectedLeads.length===0},el,10,Jt),t("li",{class:"total-leads",onClick:s[12]||(s[12]=(...l)=>e.openImportModal&&e.openImportModal(...l))},sl)])])]),e.showImportModal?(n(),a("div",ol,[t("div",al,[t("button",{type:"button",onClick:s[13]||(s[13]=(...l)=>e.closeImportModal&&e.closeImportModal(...l)),class:"close-button"},"X"),nl,e.showFileInput?c("",!0):(n(),a("div",dl,[t("button",{onClick:s[14]||(s[14]=(...l)=>e.importDirectFile&&e.importDirectFile(...l)),class:"import-button"},"Direct File Import"),t("button",{onClick:s[15]||(s[15]=(...l)=>e.showFileUploadField&&e.showFileUploadField(...l)),class:"import-button"},"Indirect File Import")])),e.showFileInput?(n(),a("div",il,[t("input",{type:"file",onChange:s[16]||(s[16]=(...l)=>e.handleFileUpload&&e.handleFileUpload(...l)),accept:".csv"},null,32),t("button",{onClick:s[17]||(s[17]=(...l)=>e.submitCsvFile&&e.submitCsvFile(...l)),class:"submit-button"},"Submit CSV"),e.fileError?(n(),a("p",rl,r(e.fileError),1)):c("",!0)])):c("",!0)])])):c("",!0),e.showSmsModal?(n(),a("div",cl,[t("div",ul,[t("span",{class:"close",onClick:s[18]||(s[18]=(...l)=>e.closeSmsModal&&e.closeSmsModal(...l))},"Ã—"),ml,v(t("textarea",{"onUpdate:modelValue":s[19]||(s[19]=l=>e.smsMessage=l),placeholder:"Enter your message here"},null,512),[[f,e.smsMessage]]),t("button",{onClick:s[20]||(s[20]=(...l)=>e.sendSms&&e.sendSms(...l))},"Send SMS")])])):c("",!0),e.showTagModal?(n(),a("div",gl,[t("div",vl,[t("button",{type:"button",onClick:s[21]||(s[21]=(...l)=>e.closeTagModal&&e.closeTagModal(...l)),class:"close-button"},"X"),hl,t("div",_l,[(n(!0),a(p,null,L(e.tags,l=>(n(),a("div",{key:l.id,class:"modal_tag"},[t("input",{type:"checkbox",value:l.id,checked:e.isTagSelected(l.id),onChange:w=>e.toggleTagSelection(l.id)},null,40,bl),y(" "+r(l.name),1)]))),128))]),t("button",{onClick:s[22]||(s[22]=l=>e.showAddTagInput=!e.showAddTagInput),class:"add-button"},"Add Tag"),e.showAddTagInput?(n(),a("div",fl,[v(t("input",{"onUpdate:modelValue":s[23]||(s[23]=l=>e.newTag=l),placeholder:"Enter new tag"},null,512),[[f,e.newTag]]),t("button",{onClick:s[24]||(s[24]=(...l)=>e.addTag&&e.addTag(...l)),class:"submit-button"},"Add")])):c("",!0),t("button",{onClick:s[25]||(s[25]=(...l)=>e.closeTagModal&&e.closeTagModal(...l)),class:"submit-button"},"Close")])])):c("",!0),e.showStageModal?(n(),a("div",yl,[t("div",Sl,[t("button",{type:"button",onClick:s[26]||(s[26]=(...l)=>e.closeStageModal&&e.closeStageModal(...l)),class:"close-button"},"X"),wl,e.showAddStageInput?(n(),a("div",kl,[v(t("input",{"onUpdate:modelValue":s[27]||(s[27]=l=>e.newStage=l),placeholder:"Enter new stage",id:"m_add_stage",class:"m_add_stage"},null,512),[[f,e.newStage]]),t("button",{onClick:s[28]||(s[28]=(...l)=>e.addStage&&e.addStage(...l)),class:"submit-button"},"Add")])):c("",!0),t("button",{onClick:s[29]||(s[29]=l=>e.showAddStageInput=!e.showAddStageInput),class:"add-button"},"Add Stage"),v(t("select",{"onUpdate:modelValue":s[30]||(s[30]=l=>e.newLead.stage=l),id:"stage_id",class:"stage_class"},[(n(!0),a(p,null,L(e.stages,l=>(n(),a("option",{key:l.id,value:l.id,class:"stage_values"},r(l.name),9,pl))),128))],512),[[N,e.newLead.stage]]),t("button",{onClick:s[31]||(s[31]=(...l)=>e.closeStageModal&&e.closeStageModal(...l)),class:"submit-button"},"Close")])])):c("",!0),e.showModal?(n(),a("div",Ll,[t("div",Ml,[t("button",{type:"button",onClick:s[32]||(s[32]=(...l)=>e.closeModal&&e.closeModal(...l)),class:"close-button"},"X"),t("h2",null,r(e.modalTitle),1),v(t("select",{"onUpdate:modelValue":s[33]||(s[33]=l=>e.selectedOption=l),class:"open_modal_drop-box"},[(n(!0),a(p,null,L(e.modalOptions,l=>(n(),a("option",{key:l.value,value:l.value},r(l.text),9,Cl))),128))],512),[[N,e.selectedOption]]),t("div",Tl,[t("button",{onClick:s[34]||(s[34]=(...l)=>e.submitAction&&e.submitAction(...l)),class:"submit-button"},"Submit"),t("button",{onClick:s[35]||(s[35]=(...l)=>e.closeModal&&e.closeModal(...l)),class:"cancel-button"},"Cancel")])])])):c("",!0),!e.loading&&!e.error?(n(),a("div",Al,[t("div",Fl,[v(t("input",{"onUpdate:modelValue":s[36]||(s[36]=l=>e.searchQuery=l),type:"text",placeholder:"Search leads by name...",class:"search-bar"},null,512),[[f,e.searchQuery]]),t("div",xl,"Total Leads: "+r(e.filteredLeads.length),1),Nl,t("button",{onClick:s[37]||(s[37]=l=>e.showForm=!0),class:"create-new-button"},"+ Create New")])])):c("",!0),e.showForm?(n(),a("div",Ul,[t("div",El,[t("button",{type:"button",onClick:s[38]||(s[38]=l=>e.showForm=!1),id:"cancel_button"},"X"),Il,t("form",{onSubmit:s[45]||(s[45]=Qe((...l)=>e.submitForm&&e.submitForm(...l),["prevent"]))},[t("label",null,[y(" First Name: "),v(t("input",{"onUpdate:modelValue":s[39]||(s[39]=l=>e.newLead.first_name=l),type:"text",required:""},null,512),[[f,e.newLead.first_name]]),e.errors.first_name?(n(),a("span",Pl,r(e.errors.first_name),1)):c("",!0)]),t("label",null,[y(" Last Name: "),v(t("input",{"onUpdate:modelValue":s[40]||(s[40]=l=>e.newLead.last_name=l),type:"text",required:""},null,512),[[f,e.newLead.last_name]]),e.errors.last_name?(n(),a("span",Vl,r(e.errors.last_name),1)):c("",!0)]),t("label",null,[y(" Email: "),v(t("input",{"onUpdate:modelValue":s[41]||(s[41]=l=>e.newLead.email=l),type:"email",required:""},null,512),[[f,e.newLead.email]]),e.errors.email?(n(),a("span",ql,r(e.errors.email),1)):c("",!0)]),t("label",null,[y(" Phone: "),v(t("input",{"onUpdate:modelValue":s[42]||(s[42]=l=>e.newLead.phone=l),type:"tel",required:""},null,512),[[f,e.newLead.phone]]),e.errors.phone?(n(),a("span",Ol,r(e.errors.phone),1)):c("",!0)]),t("label",null,[y(" Tag: "),v(t("select",{"onUpdate:modelValue":s[43]||(s[43]=l=>e.newLead.tag=l),required:""},[(n(!0),a(p,null,L(e.tags,l=>(n(),a("option",{key:l.id,value:l.id},r(l.name),9,Dl))),128))],512),[[N,e.newLead.tag]]),e.errors.tag?(n(),a("span",Bl,r(e.errors.tag),1)):c("",!0)]),t("label",null,[y(" Stage: "),v(t("select",{"onUpdate:modelValue":s[44]||(s[44]=l=>e.newLead.stage=l),required:""},[(n(!0),a(p,null,L(e.stages,l=>(n(),a("option",{key:l.id,value:l.id},r(l.name),9,Xl))),128))],512),[[N,e.newLead.stage]]),e.errors.stage?(n(),a("span",Hl,r(e.errors.stage),1)):c("",!0)]),Rl],32)])])):c("",!0),!e.loading&&!e.error?(n(),a("div",zl,[t("div",null,[Ql,v(t("select",{"onUpdate:modelValue":s[46]||(s[46]=l=>e.pageSize=l),onChange:s[47]||(s[47]=l=>e.setPageSize(Number(l.target.value)))},Gl,544),[[N,e.pageSize]])]),e.filteredLeads.length?(n(),a("table",Jl,[t("thead",null,[t("tr",null,[t("th",null,[t("label",Wl,[t("input",{type:"checkbox",onChange:s[48]||(s[48]=(...l)=>e.toggleSelectAll&&e.toggleSelectAll(...l)),class:"custom-checkbox"},null,32),$l])]),es,ts,ls,ss,os,as,ns,ds,is])]),t("tbody",null,[(n(!0),a(p,null,L(e.paginatedLeads,l=>(n(),a("tr",{key:l.id},[t("td",null,[t("label",rs,[v(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":s[49]||(s[49]=w=>e.selectedLeads=w),class:"custom-checkbox"},null,8,cs),[[Ke,e.selectedLeads]]),us])]),t("td",null,r(l.first_name),1),t("td",null,r(l.last_name),1),t("td",null,r(l.phone),1),t("td",null,r(l.email),1),t("td",null,r(l.activity||"N/A"),1),t("td",null,r(new Date(l.created_at).toLocaleDateString()),1),t("td",null,r(l.tag||"N/A"),1),t("td",null,r(l.stage||"N/A"),1),t("td",null,r(l.source||"N/A"),1)]))),128))])])):c("",!0),e.filteredLeads.length===0?(n(),a("div",ms,"No leads available.")):c("",!0)])):c("",!0),e.toast.message?(n(),a("div",{key:10,class:g(`toast ${e.toast.type}`)},[y(r(e.toast.message)+" ",1),t("button",{onClick:s[50]||(s[50]=l=>e.toast.message=""),class:"toast-close-button"},"X")],2)):c("",!0),t("div",null,[t("button",{onClick:s[51]||(s[51]=l=>e.changePage(e.currentPage-1)),disabled:e.currentPage===1},"Previous",8,gs),t("span",null,"Page "+r(e.currentPage)+" of "+r(e.totalPages),1),t("button",{onClick:s[52]||(s[52]=l=>e.changePage(e.currentPage+1)),disabled:e.currentPage===e.totalPages},"Next",8,vs)])])}const Ss=Re(Ye,[["render",hs]]);export{Ss as default};
